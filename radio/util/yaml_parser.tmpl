// generated by generate_yaml.py

//
// Enums first
//

{#
{% for enum in root.get_enums() %}
static const struct YamlIdStr {{ enum.name }}[] = {
  {% for elmt in enum.get_elmts() %}{  {{ elmt.value }}, "{{ elmt.name }}"  },
  {% endfor %}{  0, NULL  }
};
{% endfor %}
#}

//
// Structs last
//

{% macro field(type, tag, width) %}
YAML_{{type|upper}}( {{ tag }}, {{ width }} ),
{%- endmacro %}

{% macro field_list(struct) %}
  {% for elmt in struct.get_elmts() %}
    {% if elmt.type == 'string' %}
  YAML_STRING({{elmt.name}}, {{elmt.length}}),
    {% elif elmt.type in ['signed','unsigned'] %}
  {{ field(elmt.type, elmt.name, elmt.bits) }}
    {% elif elmt.type == 'enum' %}
  YAML_ENUM({{elmt.name}}, {{elmt.bits}}, {{elmt.var_type}}),
    {% elif elmt.type == 'struct' %}
      {% if elmt.name == '' %}
  {{- field_list(elmt) }}
      {% else %}
  YAML_STRUCT("{{elmt.name}}", {{elmt.bits}}, {{elmt.var_type}}, NULL),
      {% endif %}
    {% elif elmt.type == 'union' %}
      {% if elmt.name == '' %}
  {{- field_list(elmt) }}
      {% endif %}
    {% else %}
  // {{elmt.name}}, {{elmt.type}}
    {% endif %}
  {% endfor %}
{%- endmacro %}

{% for struct in root.get_structs() %}
static const struct YamlNode {{ struct.name }}[] = {
{{ field_list(struct) }}
  YAML_END
};
{% endfor %}
